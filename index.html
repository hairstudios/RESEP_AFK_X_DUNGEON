<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy Food Gallery</title>
    <!-- Memuat Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#4f46e5', // Indigo
                        'secondary': '#10b981', // Emerald
                        'background': '#f8fafc', // Slate 50
                        'card-bg': '#ffffff',
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom font for a more fantasy/game feel */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        /* Style untuk efek hover pada card */
        .food-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .food-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        /* Style untuk modal */
        .modal-content-wrapper {
             /* Mengaktifkan scroll pada modal jika konten terlalu besar */
            max-height: 90vh; 
            overflow-y: auto;
        }
    </style>
</head>
<body class="min-h-screen p-4 sm:p-8">

    <div class="max-w-7xl mx-auto">
        <header class="text-center mb-10 p-4 bg-white rounded-xl shadow-lg">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-primary mb-2">
                Fantasy Food Recipe Index
            </h1>
            <p class="text-gray-500">Kumpulan makanan dari dunia fantasi. Cari item di bawah!</p>
        </header>

        <!-- Search Input -->
        <div class="mb-8">
            <input type="text" id="searchInput" placeholder="Cari nama makanan..."
                   class="w-full p-4 border border-gray-300 rounded-xl shadow-inner focus:ring-2 focus:ring-primary focus:border-primary transition duration-150 text-lg">
        </div>

        <!-- Food Card Gallery -->
        <div id="foodGallery" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
            <!-- Cards akan di-generate oleh JavaScript di sini -->
            <div class="col-span-full text-center py-10 text-gray-500" id="noResults" style="display: none;">
                <p class="text-xl font-semibold">Tidak ditemukan hasil untuk pencarian Anda.</p>
                <p>Coba kata kunci lain.</p>
            </div>
        </div>
    </div>
    
    <!-- Modal untuk Zoom Gambar (Akan ditampilkan saat tombol detail diklik) -->
    <div id="imageModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 transition-opacity duration-300 opacity-0 pointer-events-none">
        <div class="bg-white p-6 rounded-xl shadow-2xl max-w-4xl w-11/12 relative transform scale-95 transition-transform duration-300 modal-content-wrapper">
            <!-- Tombol Tutup -->
            <button onclick="closeZoomedImage()" class="absolute top-[-10px] right-[-10px] text-white bg-red-600 hover:bg-red-700 rounded-full w-8 h-8 flex items-center justify-center text-xl font-bold p-1 shadow-xl border-2 border-white">
                &times;
            </button>
            <div class="p-2">
                <h2 id="modalFoodTitle" class="text-2xl font-bold text-primary mb-4 text-center border-b pb-2"></h2>
                <!-- Gambar yang di-zoom -->
                <img id="modalImage" src="" alt="Zoomed Food Image" class="w-full h-auto object-contain rounded-lg shadow-inner">
            </div>
        </div>
    </div>

    <script>
        // Array berisi nama-nama file gambar yang Anda sediakan
        const imageFiles = [
            "adventurer's_stew.jpg", "alchemist's_gummy.jpg", "arcane_mille_feuille.jpg", 
            "arcane_pizza.jpg", "artic_shaved_ice.jpg", "beef_wellington.jpg", 
            "beetle_knight_bar.jpg", "bouncy_jelly.jpg", "bubble_macaron.jpg", 
            "bug_jelly.jpg", "bug_marinated_taco.jpg", "candy_coffee.jpg", 
            "chargilled_ribs.jpg", "craftsman's_stew.jpg", "earthy_noodles.jpg", 
            "elemental_cold_brew.jpg", "elemental_syrup.jpg", "energy_soda.jpg", 
            "eternal_canned_meat.jpg", "everwinter_parfait.jpg", "expedition_meal.jpg", 
            "fisherman's_sashimi.jpg", "fragon_egg_legend.jpg", "garden_mousse.jpg", 
            "geothermal_hotpot.jpg", "gnome_platter.jpg", "harvest_feast.jpg", 
            "healty_salad.jpg", "jumbo_tamagoyaki.jpg", "jumpy_mushroom_tart.jpg", 
            "lightbearer_escargot.jpg", "luminous_frappe.jpg", "mage's_omelet.jpg", 
            "magic_lava_cake.jpg", "meat_omurice.jpg", "molecular_cuisine.jpg", 
            "mountain_stew.jpg", "mushroom_meat_patty.jpg", "mutated_meat_stew.jpg", 
            "ocean_steamed_egg.jpg", "savior's_sundae.jpg", "seafood_pancake.jpg", 
            "seafood_risotto.jpg", "slime_researcher's_jerky.jpg", "snow_mushroom_soup.jpg", 
            "special_mushroom_candy.jpg", "stardust_souffle.jpg", "steamed_sea_monster.jpg", 
            "stormy_custard.jpg", "stuffed_mushroom.jpg", "survivor's_ration.jpg", 
            "tangy_worm_pudding.jpg", "technician's_sandwich.jpg", "three_treasure_stew.jpg", 
            "triverse_balls.jpg", "tropical_skewers.jpg", "truffle_pie.jpg", 
            "victory_roast.jpg", "water_element_soup.jpg", "wisdom_course.jpg"
        ];

        const foodGallery = document.getElementById('foodGallery');
        const searchInput = document.getElementById('searchInput');
        const noResultsMessage = document.getElementById('noResults');
        
        // Elemen Modal
        const imageModal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        const modalFoodTitle = document.getElementById('modalFoodTitle');


        /**
         * Menampilkan modal gambar yang di-zoom.
         * @param {string} imageUrl Path gambar relatif
         * @param {string} foodName Nama makanan yang diformat
         */
        function showZoomedImage(imageUrl, foodName) {
            // Set sumber gambar dan judul di modal
            modalImage.src = imageUrl;
            modalFoodTitle.textContent = foodName;
            
            // Fallback jika gambar asli tidak ditemukan
            const fallbackPlaceholder = `https://placehold.co/600x400/94a3b8/ffffff?text=${encodeURIComponent(foodName.replace(/ /g, '\n'))}`;
            modalImage.onerror = () => {
                modalImage.src = fallbackPlaceholder;
                modalFoodTitle.textContent = `${foodName} (Gambar Tidak Ditemukan)`;
            };
            
            // Tampilkan modal dengan transisi
            imageModal.classList.remove('opacity-0', 'pointer-events-none');
            imageModal.classList.add('opacity-100');
            // Untuk memastikan transform diterapkan pada item konten modal
            document.querySelector('#imageModal > div').classList.remove('scale-95');
            document.querySelector('#imageModal > div').classList.add('scale-100');
        }

        /**
         * Menyembunyikan modal gambar.
         */
        window.closeZoomedImage = function() {
            // Sembunyikan modal dengan transisi
            imageModal.classList.remove('opacity-100');
            imageModal.classList.add('opacity-0', 'pointer-events-none');
            document.querySelector('#imageModal > div').classList.remove('scale-100');
            document.querySelector('#imageModal > div').classList.add('scale-95');
        }
        
        // Tutup modal ketika mengklik di luar gambar
        imageModal.addEventListener('click', (e) => {
            // Tutup hanya jika klik dilakukan pada background modal, bukan konten di dalamnya
            if (e.target === imageModal) {
                closeZoomedImage();
            }
        });
        
        // Tutup modal ketika menekan tombol ESC
        document.addEventListener('keydown', (e) => {
            // Cek apakah modal sedang aktif (opacity-100)
            if (e.key === 'Escape' && imageModal.classList.contains('opacity-100')) {
                closeZoomedImage();
            }
        });

        /**
         * Mengubah nama file menjadi format nama makanan yang mudah dibaca.
         * Contoh: "adventurer's_stew.jpg" menjadi "Adventurer's Stew"
         * @param {string} filename Nama file gambar
         * @returns {string} Nama makanan yang diformat
         */
        function formatFoodName(filename) {
            // Hapus ekstensi .jpg
            let name = filename.replace(/\.jpg$/i, '');
            // Ganti underscore dengan spasi
            name = name.replace(/_/g, ' ');
            // Kapitalisasi huruf pertama setiap kata (kecuali kata-kata tertentu seperti 'a', 'the', 'of', dll.)
            name = name.toLowerCase().split(' ').map(word => {
                if (word.length > 0) {
                    return word.charAt(0).toUpperCase() + word.slice(1);
                }
                return word;
            }).join(' ');
            return name;
        }

        /**
         * Membuat elemen card HTML untuk satu item makanan.
         * @param {string} filename Nama file asli
         * @param {string} formattedName Nama makanan yang diformat
         * @returns {string} String HTML dari card
         */
        function createFoodCard(filename, formattedName) {
            // Path relatif ke folder images/ (sesuai permintaan user)
            const imageUrl = `images/${filename}`;
            
            // URL placeholder yang menggunakan nama file sebagai teks (sebagai fallback jika gambar tidak ditemukan)
            const fallbackPlaceholder = `https://placehold.co/300x200/94a3b8/ffffff?text=Image+Missing`;

            // Escaping tanda kutip tunggal dalam nama makanan
            const safeFormattedName = formattedName.replace(/'/g, "\\'");

            // Escaping tanda kutip tunggal dalam URL gambar, karena ini juga akan dimasukkan ke dalam atribut onclick
            const safeImageUrlForClick = imageUrl.replace(/'/g, "\\'");
            
            return `
                <div class="food-card bg-card-bg rounded-xl shadow-md overflow-hidden transform hover:shadow-xl">
                    <!-- Menggunakan path relatif ke folder images/ -->
                    <img src="${imageUrl}" 
                         alt="${formattedName}" 
                         class="w-full h-32 object-cover"
                         onerror="this.onerror=null; this.src='${fallbackPlaceholder}'">
                    
                    <div class="p-4 text-center">
                        <!-- Cukup tampilkan judul makanan yang sudah diformat saja -->
                        <h3 class="text-lg font-semibold text-gray-800 break-words">${formattedName}</h3>
                        
                        <!-- Nama file asli dihapus sesuai permintaan -->

                        <!-- Menggunakan safeImageUrlForClick yang sudah di-escape -->
                        <button onclick="showZoomedImage('${safeImageUrlForClick}', '${safeFormattedName}')" class="mt-3 w-full bg-secondary text-white py-2 px-4 rounded-lg hover:bg-emerald-600 transition duration-150 text-sm font-medium shadow-md shadow-secondary/50">
                            Lihat Detail
                        </button>
                    </div>
                </div>
            `;
        }

        /**
         * Merender daftar card berdasarkan filter pencarian.
         * @param {string} filter Teks pencarian
         */
        function renderFoodGallery(filter = '') {
            const lowerCaseFilter = filter.toLowerCase().trim();
            let cardsHtml = '';
            let resultsCount = 0;

            imageFiles.forEach(file => {
                const formattedName = formatFoodName(file);
                // Cek apakah nama file atau nama yang diformat mengandung teks pencarian
                if (file.toLowerCase().includes(lowerCaseFilter) || formattedName.toLowerCase().includes(lowerCaseFilter)) {
                    cardsHtml += createFoodCard(file, formattedName);
                    resultsCount++;
                }
            });

            foodGallery.innerHTML = cardsHtml;

            // Tampilkan atau sembunyikan pesan 'Tidak ditemukan hasil'
            if (resultsCount === 0 && lowerCaseFilter.length > 0) {
                noResultsMessage.style.display = 'block';
            } else {
                noResultsMessage.style.display = 'none';
            }
        }

        // Event listener untuk input pencarian
        searchInput.addEventListener('input', (e) => {
            renderFoodGallery(e.target.value);
        });

        // Panggil renderGallery saat halaman dimuat untuk menampilkan semua item
        renderFoodGallery();

    </script>
</body>
</html>